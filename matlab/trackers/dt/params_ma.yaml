ROOT:
  - ['','',false,DUMMY,'','']
  - MultiAnimal:
    - ['','',false,MultiAnimal settings.,'','','','',true]
    - multi_loss_mask: ['Unlabeled animals present',boolean,true,'Set this to false only if all animals are labeled in every labeled frame.',true,'','Important','ma',true]
    - multi_crop_ims: ['Crop images during training',boolean,true,'Set this to false to force training on the entire image/frame.',true,'','Beginner','~isObjDet',true]
    - multi_crop_im_sz: ['Cropped images size for training',unsigned,false,'If images are cropped for training, then this is the size for cropping. This is auto computed. This is the size of the smallest square that covers the largest cluster of labeled animals that have overlapping masks.',32,'','Beginner','~isObjDet',true]
    - multi_match_dist: ['Non-max suppression distance',float,true,'The distance between two poses is compared to the bounding box sizes of the poses. If the average distance between the landmarks is smaller than this fraction (in percentage) of bounding box edge size, then merge the two predictions. Mainly for MA-Grone.',20.0,'','Advanced',['ma'],true]    
    - Detect:
      - ['Detection','',false,MultiAnimal settings.,'','','','',true]
      - BBox:
        - ['Bounding Box Definition','',false,'Object detection bounding box definition','','','','',true]
        - MinAspectRatio: ['Minimum Aspect Ratio',float,true,'Minimum aspect ratio for bounding boxes.',0.3,'','Beginner',['isObjDet'],true]
        #- PadFactor: ['Padding factor',float,true,'Dimensionless factor controlling width of padding around target hull.',1.0,'','Developer',['isObjDet'],true]
      - DeepTrack:
        - ['Deep Learning (Detection)','',false,Deep learning parameters,'','']
        - Saving:
          - ['','',false,'Saving, display, and communication parameters','','']
          - save_step: ['Training tracker save interval',unsigned,true,'How often (number of iterations of gradient descent) to save intermediate trackers during training.',1000,'','Advanced','isTopDown',false]
          - display_step: ['Training error interval',unsigned,true,'How often (number of iterations of gradient descient) to compute the training error.',50,'','Developer','isTopDown',false]
          - maxckpt: ['Number of trackers to keep',unsigned,true,'Number of intermediate trackers during training to keep at once. ',5,'','Developer','isTopDown',false]
        - ImageProcessing:
          - ['Image Processing','',false,'Parameters related to initial processing of the input video data before any learning happens.','','','','']
          - scale: ['Downsample factor',float,true,'Downsample images in width and height by this factor. This will decrease the amount of memory needed on the GPU.',1.0,'ParameterVisualizationMemory','Important','isTopDown',true]
          - adjustContrast: ['Histogram equalization',boolean,true,'Normalize image contrast using contrast limited adaptive histogram equalization (CLAHE).',0,'','Beginner','isTopDown',true]
          - clahe_grid_size: ['Neighborhood size for histogram equalization',unsigned,true,'CLAHE normalizes contrast in local neighborhoods -- squares with this side length, in pixels.',20,'','Advanced','isTopDown',true]
          - normalize: ['Brightness normalization',boolean,true,'Normalize images by subtracting the average pixel intensity in the image.',0,'','Beginner','isTopDown',true]
          - flipud: ['Flip movie',boolean,true,'Whether to flip images upside down. ',0,'','Developer','isTopDown',true]
          - imax: ['Max pixel value',float,true,'Maximum pixel value in the video.',255.,'','Advanced','isTopDown',true]
        - GradientDescent:
          - ['Gradient Descent','',false,'Parameters related to gradient-descent-based optimization of the tracker.','','','','']
          - dl_steps: ['N. iterations of training',unsigned,true,'Number of iterations of gradient descent to train the tracker for. Longer training generally works better, but takes longer. ',40000,'','Important','isTopDown',true]
          - batch_size: ['Training batch size',unsigned,true,'Number of training examples used in each iteration of gradient descent. Too large of values may cause the GPU to run out of memory. Too small of values may make training slower and result in poor optimization. When changed to 8/x, it is suggested to increase the number of training iterations by x for better performance. Does not apply to DeepLabCut where batch size is always 1.',8,'ParameterVisualizationMemory','Important','isTopDown',true]
          - learning_rate_multiplier: ['Learning Rate Multiplier',float,true,'Learning rate multplier for networks other than deeplabcut. If the multiplier is m, and base learning rate is 0.0001 then then learning rate used will be 0.0001*m. Does not apply to LEAP and DeepLabCut.',1.,'','Beginner','isTopDown',true]
          - lr_drop_step: ['Learning Rate Drop',float,true,'At the end of training, the fraction of training steps to train at lower learning rate.',0.15,'','Advanced','isTopDown',true]
          - cos_steps: ['OBSOLETE N. warm restarts',unsigned,true,'OBSOLETE Number of times to restart training',2,'','Advanced','isTopDown',true]
          - decay_steps: ['OBSOLETE Learning rate decay iterations',float,true,'OBSOLETE The learning rate is decayed by gamma (below) after this many iterations of training. Does not apply to LEAP and DeepLabCut.',25000,'','Developer','isTopDown',true]
          - gamma: ['OBSOLETE Learning rate decay (gamma)',float,true,'OBSOLETE Amount to decay the learning rate by after the number of decay iterations above. Does not apply to LEAP and DeepLabCut.',0.1,'','Developer','isTopDown',true]
          - num_test: ['Number of test examples',unsigned,true,'Number of training examples to use to compute the training error.',24,'','Advanced','isTopDown']
          - normalize_loss_batch: ['Normalize the loss',boolean,true,'Normalize the loss by the batch size. Not normalizing is better',0,'','Developer','isTopDown',true]
        - DataAugmentation:
          - ['Data Augmentation','',false,'To learn invariances to certain kinds of perturbations, training data can be augmented by randomly perturbing each image during training.','','','','isHeadTail']
          - rrange: ['Rotate range',unsigned,true,'Augment by rotating training images and labels by a random angle less than this number of degrees in either direction.',20,'','Beginner','isHeadTail',true]
          - trange: ['Translation range',unsigned,true,'Augment by translating training images and labels by a random amounts in both x- and y- directions less than this number of pixels. ',20,'','Beginner','isHeadTail',true]
          - scale_factor_range: ['Scale factor range',float,true,'Augment by adjusting image scale by a random factor between (1/this number) to (this number). 1 indicates no scale adjustment, 2 indicates scaling by a factor between 1/2 to 2',1.2,'','Advanced','isHeadTail',true]
          - crange: ['Contrast range',float,true,'Augment by adjusting image contrast by a random amount less than this number. 0 indicates no contrast adjustment, 1 indicates maximum contrast adjustment',0.1,'','Advanced','isHeadTail',true]
          - brange: ['Brightness range',float,true,'Augment by adjusting image brightness by a random amount less than this number. 0 indicates no brightness adjustment, 1 indicates maximum brightness adjustment.',0.1,'','Advanced','isHeadTail',true]
          - horz_flip: ['Flip horizontally',boolean,true,'Augment by flipping the training image and labels horizontally (left to right). Set pairs of corresponding landmarks by selecting "Select landmark flip pairings" from the Track menu. ',0,'','Important','isHeadTail',true]
          - vert_flip: ['Flip vertically',boolean,true,'Augment by flipping the training image ang labels vertically (bottom to top). Set pairs of corresponding landmarks by selecting "Select landmark flip pairings" from the Track menu. ',0,'','Important','isHeadTail',true]
          - perturb_color: ['Perturb color',boolean,true,'Augment by perturbing image color.',0,'','Advanced','isHeadTail',true]
          - check_bounds_distort: ['Check landmarks during augmentation',boolean,true,'Check that landmarks remain within the image during augmentation.',0,'','Advanced','isHeadTail',true]
        - LossFunction:
          - ['Loss Function','',false,'Parameters related to the deep-learning error criterion minimized.','','','','']
          - label_blur_rad: ['Label uncertainty radius',float,true,'Standard deviation, in pixels, of the landmark location. In the label heatmap used for training, a Gaussian with this std-dev is placed at each landmark location. Only applicable to heatmap based methods. Not applicable to DeepLabCut and LEAP.',3.,'','Advanced','isTopDown',true]
    - TargetCrop:
      - ['Cropping around Detections','',false,"APT crops out regions centered around each detected animal and runs part-tracking on these image crops. These parameters describe how image patches around individual animals are cropped out.",'','','','']
      #- AutoRadius: ['Automatically determine crop radius',boolean,true,"If true, target crop radius will be set automatically.",false,'','Developer',['isTopDown','hasTrx'],true]
      #- AutoRadiusSpanMultiplier: ['Keypoint span to crop radius multiplier',float,true,"Multiplicative factor for automatically calculating crop radius.",2.0,'','Developer',['isTopDown','hasTrx'],true]
      - ManualRadius: ['Animal Box Size Radius',unsigned,true,'Radius (in pixels) of the square cropped around each target.',50,'ParameterVisualizationTgtCropRadius','Important',['isTopDown','hasTrx'],true]
      - AlignUsingTrxTheta: ['Align using head-tail or using trajectory theta',boolean,true,"If true, align cropped images using head-tail orientation or using trx.theta if the project uses trx files.",true,'','Beginner',['hasTrx','isHeadTail'],true]
      - PadBkgd: ['Pad background',unsigned,true,'If the cropped regions need to be padded, this value indicates the image intensity to pad with.',0,'','Advanced',['hasTrx','isTopDown'],true]
      - multi_scale_by_bbox: ['Use animal''s size to determine the cropping size',boolean,true,'For pose estimation (stage 2), crop the image around animal based on their detected size and scale the cropped image to a common size before estimating the pose. Useful if the visual scale of the animals varies a lot. Unselect if the apparent scale of all the animals does not change. In this case, all detected animals are cropped uniformly.',true,'','Beginner',['isTopDown'],true]
    - LossMask:
      - ['Loss Masking','',false,Parameters for masking loss to handle unlabeled targets,'','']
      - MinAspectRatio: ['Minimum Aspect Ratio',float,true,'Minimum aspect ratio for mask.',0.3,'','Advanced',['ma'],true]
      - PadFactor: ['Padding factor',float,true,'Dimensionless factor controlling width of padding around target. A value of 1 indicates a tight fit around the landmark convex hull.',1.5,'','Beginner',['ma'],true]
      - PadFloor: ['Minimum padding',float,true,'Minimum width of padding around target, in pixels.',32,'','Beginner',['ma'],true]
      - AlignHeadTail: ['Align mask using head/tail landmark specifications',boolean,true,'If true, align masks to animal using head/tail landmarks',false,'','Beginner','ma',true]
    - Track:
        - ['Multi-animal tracking parameters','',false,Multi-animal tracking parameters,'','']
        - min_n_animals: ['Minimum number of animals',unsigned,false,'APT will detect at least this many animals in each frame.',0,'','Developer','ma',true]
        - max_n_animals_user: ['Maximum number of animals',unsigned,true,'APT will detect at most this many animals in each frame.',30,'','Important','ma',true]
        - max_n_animals: ['Maximum number of animals to detect',unsigned,false,'APT will detect at most this many animals in each frame.',30,'','Developer','ma',true]
        - TrackletStitch:
          - ['Tracklet Stitching','',false,Parameters for stitching tracked targets into tracklets,'','']
          - link_stage: ['Stitching stage',['first','second','none'],true,'Whether to stitch detections into tracklets at the first (detection) stage, or the second (pose-tracking) stage.','second','','Advanced',['ma'],true]
#          - link_id: ['Identity Linking',boolean, true,'Whether to stitch detections using identity tracking.',false,'','Important',['ma'],true]
          - link_maxcost_heuristic: ['Linking cutoff method',['secondorder','prctile'],true,'Method to compute the cutoff for linking. Secondorder sets the cutoff where sorted match distances sharply increases. Prctile computes the cutoff as a percentile of matched distances','secondorder','','Advanced',['ma'],true]
          - link_maxcost_mult: ['Linking Aggressiveness',float,true,'This determines how aggresively tracklets are linked. Value of 1 will not link frames that have unusual large movements. For value less than 1 tracking will break even for usual large movements. Values greater than 1 (3-4) will link detections across large jumps.',1.0,'','Beginner',['ma'],true]
          - link_maxcost_prctile: ['Cutoff Percentile',float,true,'When using prctile (percentile) method to compute the cutoff, the percentile to use to compute the cutoff.',95,'','Advanced',['ma'],true]
          - link_maxframes_delete: ['Minimum Trajectory Length',unsigned,true,'Delete trajectories of length shorter than this.',10,'','Beginner',['ma'],true]
          - link_maxframes_missed: ['Max gap length to link',unsigned,true,'Maximum gap length in trajectory across which to link trajectory.',10,'','Advanced',['ma'],true]
          - link_strict_match_thres: ['Matching Threshold',float,true,'Match a prediction only if the distance to closest match is smaller than the distance to the next closest match by this factor.',2,'','Advanced',['ma'],true]
          - link_id_training_iters: ['Identity Tracker Training iterations',unsigned,true,'Number of steps to training the identity tracker for.',100000,'','Beginner',['ma'],true]
          - link_id_tracklet_samples: ['Tracklet Samples',unsigned,true,'Number of examples to sample from a tracklet when assigning identity.',25,'','Advanced',['ma'],true]
          - link_id_rescale: ['Identity tracker downsampling factor',float,true,'Amount to downsample the cropped animal images for identity tracking.',1,'','Important',['ma'],true]
          - link_id_batch_size: ['Identity tracker batch size',unsigned,true,'Batch size to use for training identity network.',16,'','Beginner',['ma'],true]
          - link_id_mining_steps: ['Identity tracker mining steps',unsigned,true,'Number of times to do hard triplet mining during identity tracking.',10,'','Advanced',['ma'],true]
          - link_id_cropsz: ['Crop size to use for ID Linking',signed,true,'Crop size to use ID linking. If less than 0, the automatically computed crop size is used',-1,'','Beginner',['ma'],true]
          - link_id_motion_link: ['Use motion linking before grouping by identity',signed,true,'Crop size to use ID linking. If less than 0, the automatically computed crop size is used',false,'','Advanced',['ma'],true]

